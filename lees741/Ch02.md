# Ch02. 데이터 모델과 질의 언어
> 다양한 범용 데이터 모델 살펴보기
## 관계형 모델과 문서 모델
### 객체 관계형 불일치
> 객체지향 프로그래밍 언어 코드와 관계형 데이터 베이스 모델 사이에 불일치 존재하기 때문에 전환이 필요

* 하나의 객체를 관계형 스키마로 표현하려면 여러 정보를 개별 테이블에 넣고, 외래키로 참조하는 방식
  * 다중 질의 (각 테이블에 공통된 id로 질의) 또는 테이블 간 다중 조인을 수행해야 한다.
* `JSON`등 하나의 문서로 표현하는 방식
  * 질의 하나로 충분하다.

### 관계형 데이터베이스와 오늘날의 문서 데이터베이스
* 문서 데이터 모델 장점: 스키마 유연성, 지역성에 기인한 더 나은 성능
* 관계형 데이터 모델 장점: 조인, 다대일, 다대다 관계를 더 잘 지원

#### 어떤 데이터 모델이 애플리케이션 코드를 더 간단하게 할까?
> 두 모델 중 어떤 모델이 더 우월하고 좋은 모델인지 단정지을 수는 없다.
> 애플리케이션 데이터 구조에 따라 결정해야 한다.

* 애플리케이션 데이터가 문서와 비슷한 구조라면 문서 모델을 사용하는 것이 좋다.
  * 일대다 관계 트리
  * 문서 내 중첩 항목을 바로 참조할 수는 없다.
  * 조인 지원이 미흡하다.
* 애플리케이션에서 다대다 관계를 사용한다면 관계 모델을 사용하는 것이 좋다.
  * 상호 연결이 많은 데이터의 경우 문서 모델보다 관계형 모델이 낫다.

#### 문서 모델에서의 스키마 유연성
* `JSON`은 문서 데이터에 어떤 스키마를 강요하지 않는다.
  * 임의의 키와 값을 문서에 추가 가능
  * 클라이언트가 읽을 때 문서에 포함된 필드의 존재 여부를 보장하지 않음
* 쓰기 스키마(schema-on-write)와 반대되는 읽기 스키마(schema-on-read)
  * schema-on-write: 전통적인 관계형 데이터베이스의 접근 방식, 스키마는 명시적이고 데이터베이스는 모든 데이터가 스키마를 따르고 있음을 보장
  * schema-on-read: 데이터 구조는 암묵적이고 데이터를 읽을 때만 해석
* 여러 유형의 오브젝트가 있고 사용자가 제어할 수 없는 외부 시스템에 의해 데이터 구조가 결정되는 경우 유연한 스키마 구조가 유리하다.

#### 문서 데이터베이스와 관계형 데이터베이스의 통합
* 대부분의 관계형 데이터베이스 시스템은 `XML`을 지원하고 `JSON`도 지원하고 있다.
* 일부 문서 데이터베이스에서는 관계형 조인을 지원하기도 한다.
* 즉, 각 데이터 모델이 서로 부족한 점을 보완해 나가고 있기 때문에 점점 더 비슷해지고 있다.

## 데이터를 위한 질의 언어
> 관계형 모델이 등장했을 때 SQL 등 선언형 쿼리 언어와 IMS 등 명령형 코드가 데이터 쿼리에 사용됐다.

* 선언형 질의 언어는 특정 순서로 특정 연산을 수행하게끔 지시하는 것이 아니라 목표만 선언하는 방식
  * 데이터베이스 엔진의 상세 구현이 숨겨져 있어 쿼리를 변경하지 않고 성능 향상이 가능

## 그래프형 데이터 모델
> 데이터에서 다대다 관계가 매우 일반적이고 데이터 간 연결이 더 복잡해지면 관계형 모델보다 그래프로 데이터를 모델링하는 것이 더 자연스럽다.

* 각 유형의 객체를 정점(vertex)으로 나타내고 각 객체의 연결관계를 간선(edge)으로 나타낸다.
